# backup-with-rsync

`backup_list.csv` ファイルで指定された複数のディレクトリを、`rsync` を使って効率的にバックアップするシェルスクリプトです。
Linux環境および、WSL (Windows Subsystem for Linux) や Git Bash を導入したWindows環境で動作します。

## 主な機能

- **設定ファイルベース**: `backup_list.csv` にバックアップしたい内容を記述するだけで、複数のバックアップを一括で実行できます。
- **差分バックアップ**: `rsync` を利用しているため、変更があったファイルのみを転送する高速な差分バックアップが可能です。
- **柔軟な削除オプション**: バックアップ元で削除されたファイルを、バックアップ先からも削除するかどうか（ミラーリングするかどうか）を設定ごとに選択できます。

## 使い方

1. **設定ファイルの準備**

   `backup_list.csv.sample` ファイルをコピーして、`backup_list.csv` という名前のファイルを作成します。

   ```bash
   cp backup_list.csv.sample backup_list.csv
   ```

2. **バックアップ設定の編集**

   `backup_list.csv` を開き、バックアップしたいディレクトリの情報を記述します。ファイルの書式は以下の通りです。

   ```csv
   # バックアップ元ディレクトリ,バックアップ先ディレクトリ,削除オプション(true/false)
   ```

   - **バックアップ元**: バックアップしたいフォルダの絶対パス。
   - **バックアップ先**: バックアップを保存したいフォルダの絶対パス。
   - **削除オプション**: 
     - `true` を指定すると、バックアップ元に存在しないファイル・フォルダがバックアップ先から削除されます（同期）。
     - `false` または空欄にすると、バックアップ先のファイルは削除されず、追加・更新のみが行われます。

   **設定例:**
   ```csv
   # Documentsフォルダを外付けHDDに同期する
   /home/user/Documents,/media/user/backup_hdd/Documents,true

   # PicturesフォルダをNASに追加バックアップする（古い写真は消さない）
   /home/user/Pictures,/mnt/nas/Pictures,false
   ```

3. **バックアップの実行**

   以下のコマンドを実行して、バックアップを開始します。

   ```bash
   ./backup.sh
   ```

   スクリプトは `backup_list.csv` の内容を上から順に実行します。

## 今後の開発予定

- [ ] ログ機能の追加
- [ ] エラーハンドリングの強化
- [ ] dry-run（テスト実行）オプションの追加
- [ ] バックアップ対象除外リストのサポート
